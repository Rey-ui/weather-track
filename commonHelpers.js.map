{"version":3,"file":"commonHelpers.js","sources":["../src/js/services/weather-api.js","../src/js/render/render-city-card.js","../src/js/render/render-popular-cities.js","../src/js/popularCities.js","../src/js/actions.js","../src/js/storage.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '169e2d2ec6f9ef07a3c4e60acede402f';\nconst BASE_URL = 'https://api.openweathermap.org/data/2.5';\nasync function searchCityWeather(query) {\n  const responce = await axios.get(\n    `${BASE_URL}/weather?q=${query}&appid=${API_KEY}`\n  );\n  return responce.data;\n}\nexport default searchCityWeather;\n","function createCityCardMarkup(pictures, list) {\n  const markup = pictures\n    .map(({ id, name, main: { temp } }) => {\n      return `<li id=\"${id}\" class=\"gallery__item\">\n                  ${name} <span>${temp}</span><a href=\"../../parcials/city-info.html\"></a>\n                  <button class=\"item-btn\">X</button>\n      </li>`;\n    })\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n}\nexport default createCityCardMarkup;\n","function createPopularCityCardMarkup({ name, main: { temp } }) {\n  return `<li name=\"${name}\" class=\"gallery__item\">${name} <span>${temp}</span><a href=\"../../parcials/city-info.html?name=${name}\">hjhj</a></li>`;\n}\nexport default createPopularCityCardMarkup;\n","import createPopularCityCardMarkup from './render/render-popular-cities.js';\nimport searchCityWeather from './services/weather-api.js';\nconst popularCities = [\n  'London',\n  'Tokio',\n  'Paris',\n  'Berlin',\n  'Kyiv',\n  'Seoul',\n  'Pekin',\n  'Toronto',\n];\n\nasync function showPopularCities(popularCitiesListEl) {\n  try {\n    for (let popularCity of popularCities) {\n      const popularCityItem = await searchCityWeather(popularCity);\n\n      popularCitiesListEl.insertAdjacentHTML(\n        'beforeend',\n        createPopularCityCardMarkup(popularCityItem)\n      );\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\nexport default showPopularCities;\n","function getCurrentWeather(weather) {\n  const weatherArr = {\n    // Clear:,\n    Clouds: '#icon-cloud',\n    // 'Rain',\n    // 'Drizzle',\n    // 'Thunderstorm',\n    // 'Snow',\n    // 'Mist',\n    // 'Smoke',\n    // 'Haze',\n    // 'Dust',\n    // 'Fog',\n    // 'Sand',\n    // 'Ash',\n    // 'Squall',\n    // 'Tornado',\n  };\n  //   const choseWeather = weatherArr.find(el => el.key === weather);\n  console.log(weatherArr[weather]);\n}\n\n// main\tЧто значит\n// Clear\tЯсно\n// Clouds\tОблачно\n// Rain\tДождь\n// Drizzle\tМорось\n// Thunderstorm\tГроза\n// Snow\tСнег\n// Mist\tДымка\n// Smoke\tДым\n// Haze\tМгла\n// Dust\tПыль\n// Fog\tТуман\n// Sand\tПесок\n// Ash\tВулканический пепел\n// Squall\tШквал\n// Tornado\tТорнадо\nexport default getCurrentWeather;\n","export function getSavedCities(LOCAL_KEY) {\n  return JSON.parse(localStorage.getItem(LOCAL_KEY)) || [];\n}\nexport function saveCities(cities, LOCAL_KEY) {\n  return localStorage.setItem(LOCAL_KEY, JSON.stringify(cities));\n}\n","// import searchPictures from './js/pixabay-api.js';\n// import {\n//   hideLoader,\n//   showLoader,\n//   clearGallery,\n//   createMurkap,\n// } from './js/render-functions.js';\nimport iziToast from 'izitoast';\n// // Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// import SimpleLightbox from 'simplelightbox';\n// // Додатковий імпорт стилів\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\n// const formEl = document.querySelector('.form');\n// const listEl = document.querySelector('.gallery');\n// const loadMoreBtn = document.querySelector('.load-more');\n// const preLoader = document.querySelector('.pre-loader');\n// const queryParams = {\n//   page: 1,\n//   query: '',\n//   maxPage: 0,\n//   per_page: 15,\n// };\n// const lightbox = new SimpleLightbox('.gallery .gallery__item a', {\n//   captionsData: 'alt',\n//   captionPosition: 'bottom',\n//   captionDelay: 250,\n// });\n\n// formEl.addEventListener('submit', handleSearch);\n\n// async function handleSearch(e) {\n//   e.preventDefault();\n//   queryParams.page = 1;\n//   const form = e.currentTarget;\n//   const imageValue = form.elements.searchText.value.trim();\n//   queryParams.query = imageValue;\n//   clearGallery(listEl);\n//   if (!imageValue) {\n//     iziToast.error({\n//       title: 'Error',\n//       message: `❌Enter the text`,\n//     });\n//     return;\n//   }\n//   showLoader();\n//   loadMoreBtn.classList.add('hidden');\n//   try {\n//     const { hits, totalHits } = await searchPictures(queryParams);\n//     queryParams.maxPage = Math.ceil(totalHits / queryParams.per_page);\n//     if (!hits || hits.length === 0) {\n//       clearGallery(listEl);\n//       iziToast.error({\n//         title: 'Error',\n//         message: `❌Sorry, there are no images matching your search query. Please, try again!`,\n//       });\n//     } else {\n//       createMurkap(hits, listEl);\n//       lightbox.refresh();\n//       if (hits.length > 0 && totalHits != hits.length) {\n//         showLoadMoreButton();\n//       } else {\n//         hideLoadMoreButton();\n//       }\n//     }\n//   } catch (err) {\n//     console.error(err);\n//     return err;\n//   } finally {\n//     form.reset();\n//     hideLoader();\n//   }\n// }\n// async function handleLoadMore() {\n//   queryParams.page += 1;\n//   showPreLoader();\n//   try {\n//     const { hits } = await searchPictures(queryParams);\n\n//     createMurkap(hits, listEl);\n//     const cardHeight = listEl\n//       .querySelector('.gallery__item-link')\n//       .getBoundingClientRect().height;\n//     window.scrollBy({ top: cardHeight * 3, behavior: 'smooth' });\n//     lightbox.refresh();\n//   } catch (err) {\n//     console.error(err);\n//     return err;\n//   } finally {\n//     hidePreLoader();\n//     if (queryParams.page >= queryParams.maxPage) {\n//       iziToast.error({\n//         title: 'Message',\n//         message: `We're sorry, but you've reached the end of search results.\n// `,\n//       });\n//       hideLoadMoreButton();\n//     }\n//   }\n// }\n// function showPreLoader() {\n//   loadMoreBtn.disabled = true;\n//   preLoader.classList.remove('hidden');\n// }\n// function hidePreLoader() {\n//   loadMoreBtn.disabled = false;\n//   preLoader.classList.add('hidden');\n// }\n// function showLoadMoreButton() {\n//   loadMoreBtn.classList.remove('hidden');\n//   loadMoreBtn.addEventListener('click', handleLoadMore);\n// }\n// function hideLoadMoreButton() {\n//   loadMoreBtn.classList.add('hidden');\n//   loadMoreBtn.removeEventListener('click', handleLoadMore);\n// }\nimport searchCityWeather from './js/services/weather-api.js';\nimport createCityCardMarkup from './js/render/render-city-card.js';\nimport showPopularCities from './js/popularCities.js';\nimport getCurrentWeather from './js/actions.js';\nimport { getSavedCities, saveCities } from './js/storage.js';\nconst LOCAL_KEY = 'citiesList';\ngetCurrentWeather('Clouds');\nconst formEl = document.querySelector('.our-cities__form');\nconst citiesListEl = document.querySelector('.our-cities__list');\nconst popularCitiesListEl = document.querySelector('.popular-cities__list');\nconst btnClear = document.querySelector('.our-cities__clear-btn');\nlet citiesArr = getSavedCities(LOCAL_KEY) || [];\nformEl.addEventListener('submit', handleSearchCity);\ncitiesListEl.addEventListener('click', handleDeleteTask);\nbtnClear.addEventListener('click', handleClearCitiesList);\n\ncreateCityCardMarkup(citiesArr, citiesListEl);\n\nshowPopularCities(popularCitiesListEl);\n\nasync function handleSearchCity(e) {\n  e.preventDefault();\n  const form = e.currentTarget;\n  const cityValue = form.elements.city.value.trim();\n\n  if (!cityValue) {\n    iziToast.error({\n      title: 'Error',\n      message: `❌Sorry, already exist!`,\n    });\n    return;\n  }\n  try {\n    const city = await searchCityWeather(cityValue);\n    console.log(city.weather[0].main);\n    if (!city || city.length === 0) {\n      return;\n    } else {\n      citiesListEl.innerHTML = '';\n      const cities = addCity(city);\n      console.log(citiesArr);\n      createCityCardMarkup(cities, citiesListEl);\n    }\n  } catch (err) {\n    console.log(err);\n    iziToast.error({\n      title: 'Error',\n      message: `❌Sorry, there are no images matching your search query. Please, try again!`,\n    });\n  } finally {\n    form.reset();\n  }\n}\n\nfunction renderCities(citiesArr, list) {\n  list.innerHTML = '';\n  createCityCardMarkup(citiesArr, list);\n}\n\nfunction handleDeleteTask(e) {\n  const btn = e.target.closest('.item-btn');\n  if (!btn) return;\n  const li = btn.closest('li');\n  const cityId = Number(li.id);\n  citiesArr = citiesArr.filter(city => city.id !== cityId);\n  saveCities(citiesArr, LOCAL_KEY);\n  renderCities(citiesArr, citiesListEl);\n}\n\nfunction handleClearCitiesList() {\n  citiesListEl.innerHTML = '';\n  citiesArr = [];\n  localStorage.removeItem(LOCAL_KEY);\n}\nfunction addCity(city) {\n  const isExist = citiesArr.some(item => item.id === city.id);\n  if (isExist) {\n    iziToast.error({\n      title: 'Error',\n      message: `❌Sorry, already exist!`,\n    });\n    return citiesArr;\n  }\n\n  citiesArr = [...citiesArr, city];\n  saveCities(citiesArr, LOCAL_KEY);\n  return citiesArr;\n}\n"],"names":["API_KEY","BASE_URL","searchCityWeather","query","axios","createCityCardMarkup","pictures","list","markup","id","name","temp","createPopularCityCardMarkup","popularCities","showPopularCities","popularCitiesListEl","popularCity","popularCityItem","err","getCurrentWeather","weather","getSavedCities","LOCAL_KEY","saveCities","cities","formEl","citiesListEl","btnClear","citiesArr","handleSearchCity","handleDeleteTask","handleClearCitiesList","form","cityValue","iziToast","city","addCity","renderCities","btn","li","cityId","item"],"mappings":"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"}