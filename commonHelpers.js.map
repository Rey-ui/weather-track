{"version":3,"file":"commonHelpers.js","sources":["../src/js/services/weather-api.js","../src/js/render/render-city-card.js","../src/js/storage.js","../src/js/services/refs.js","../src/js/actions.js","../src/js/render/render-popular-cities.js","../src/js/popularCities.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '169e2d2ec6f9ef07a3c4e60acede402f';\nconst BASE_URL = 'https://api.openweathermap.org/data/2.5';\nasync function searchCityWeather(query) {\n  const responce = await axios.get(\n    `${BASE_URL}/weather?q=${query}&appid=${API_KEY}`\n  );\n  return responce.data;\n}\nexport default searchCityWeather;\n","import { getCurrentWeather } from '../actions.js';\n\nfunction createCityCardMarkup(cities, list) {\n  const markup = cities\n    .map(({ id, name, main: { humidity, temp }, weather, wind: { speed } }) => {\n      const weatherIcon = weather[0].main;\n      return `<li id=\"${id}\" class=\"our-cities__item\">\n                  <a href=\"../../parcials/city-info.html?name=${name}\">\n                    <h3>${name}</h3>\n                    <div>\n                      <div>\n                        <div>\n                          <svg class=\"header__svg\" width=\"35\" height=\"30\">\n                              <use href=\"./img/svg/symbol-defs.svg#${getCurrentWeather(weatherIcon)}\"></use>\n                          </svg>\n                          <span>${weatherIcon}</span>\n                        </div>\n                        <p>${Math.ceil(temp - 273.15)}°</p>\n                      </div>\n                      <div>\n                          <div>\n                            <svg class=\"header__svg\" width=\"15\" height=\"15\">\n                                <use href=\"./img/svg/symbol-defs.svg#icon-droplet\"></use>\n                            </svg>\n                            <span>${humidity}%</span>\n                          </div>\n                          <div>\n                            <svg class=\"header__svg\" width=\"35\" height=\"30\">\n                                <use href=\"./img/svg/symbol-defs.svg#icon-wind\"></use>\n                            </svg>\n                            <span>${speed}mph</span>\n                          </div>\n                      </div>\n                    </div>\n                  </a>\n                  <button class=\"item-btn\">\n                    <svg class=\"header__svg\" width=\"35\" height=\"30\">\n                      <use href=\"./img/svg/symbol-defs.svg#icon-trash\"></use>\n                    </svg>\n                  </button>\n              </li>`;\n    })\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n}\n\nexport default createCityCardMarkup;\n","export function getSavedCities(LOCAL_KEY) {\n  return JSON.parse(localStorage.getItem(LOCAL_KEY)) || [];\n}\nexport function saveCities(cities, LOCAL_KEY) {\n  return localStorage.setItem(LOCAL_KEY, JSON.stringify(cities));\n}\n","export const formEl = document.querySelector('.our-cities__form');\nexport const citiesListEl = document.querySelector('.our-cities__list');\nexport const popularCitiesListEl = document.querySelector(\n  '.popular-cities__list'\n);\nexport const btnClear = document.querySelector('.our-cities__clear-btn');\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport searchCityWeather from './services/weather-api.js';\nimport createCityCardMarkup from './render/render-city-card.js';\nimport { getSavedCities, saveCities } from './storage.js';\n\nimport { citiesListEl } from './services/refs.js';\n\nconst LOCAL_KEY = 'citiesList';\nlet citiesArr = getSavedCities(LOCAL_KEY) || [];\ncreateCityCardMarkup(citiesArr, citiesListEl);\n\nexport function getCurrentWeather(weather) {\n  const weatherArr = {\n    Clear: 'icon-sun',\n    Clouds: 'icon-cloud',\n    Rain: 'icon-cloud-rain',\n    Drizzle: 'icon-cloud-drizzle',\n    Thunderstorm: 'icon-cloud-lightning',\n    Snow: 'icon-cloud-snow',\n    Mist: 'icon-weather-windy',\n    Smoke: 'icon-weather-windy',\n    Haze: 'icon-weather-windy-cloudy',\n    Dust: 'icon-triangle',\n    Fog: 'icon-eye-off',\n    Sand: 'icon-chart-area',\n    Ash: 'icon-chart-area',\n    Squall: 'icon-warning',\n    Tornado: 'icon-warning',\n  };\n  return weatherArr[weather] || 'icon-cloud';\n}\n\nexport async function handleSearchCity(e) {\n  e.preventDefault();\n  const form = e.currentTarget;\n  const cityValue = form.elements.city.value.trim();\n\n  if (!cityValue) {\n    iziToast.error({\n      title: 'Error',\n      message: `❌Sorry, already exist!`,\n    });\n    return;\n  }\n  try {\n    const city = await searchCityWeather(cityValue);\n    console.log(city.weather[0].main);\n    if (!city || city.length === 0) {\n      return;\n    } else {\n      citiesListEl.innerHTML = '';\n      const cities = addCity(city);\n      console.log(citiesArr);\n      createCityCardMarkup(cities, citiesListEl);\n    }\n  } catch (err) {\n    console.log(err);\n    iziToast.error({\n      title: 'Error',\n      message: `❌Sorry, there are no images matching your search query. Please, try again!`,\n    });\n  } finally {\n    form.reset();\n  }\n}\n\nfunction renderCities(citiesArr, list) {\n  list.innerHTML = '';\n  createCityCardMarkup(citiesArr, list);\n}\n\nexport function handleDeleteTask(e) {\n  const btn = e.target.closest('.item-btn');\n  if (!btn) return;\n  const li = btn.closest('li');\n  const cityId = Number(li.id);\n  citiesArr = citiesArr.filter(city => city.id !== cityId);\n  saveCities(citiesArr, LOCAL_KEY);\n  renderCities(citiesArr, citiesListEl);\n}\n\nexport function handleClearCitiesList() {\n  citiesListEl.innerHTML = '';\n  citiesArr = [];\n  localStorage.removeItem(LOCAL_KEY);\n}\nfunction addCity(city) {\n  const isExist = citiesArr.some(item => item.id === city.id);\n  if (isExist) {\n    iziToast.error({\n      title: 'Error',\n      message: `❌Sorry, already exist!`,\n    });\n    return citiesArr;\n  }\n\n  citiesArr = [...citiesArr, city];\n  saveCities(citiesArr, LOCAL_KEY);\n  return citiesArr;\n}\n","import { getCurrentWeather } from '../actions.js';\n\nfunction createPopularCityCardMarkup({ id, name, main: { temp }, weather }) {\n  const weatherIcon = weather[0].main;\n  return `<li id=\"${id}\" class=\"our-cities__item\">\n                    <a href=\"../../parcials/city-info.html?name=${name}\">\n                      <h3>${name}</h3>\n                      <div>\n                        <div>\n                          <svg class=\"header__svg\" width=\"35\" height=\"30\">\n                              <use href=\"./img/svg/symbol-defs.svg#${getCurrentWeather(weatherIcon)}\"></use>\n                          </svg>\n                          <span>${weatherIcon}</span>\n                        </div>\n                        <p>${Math.ceil(temp - 273.15)}°</p>\n                      </div>\n                    </a>\n                </li>`;\n}\nexport default createPopularCityCardMarkup;\n","import createPopularCityCardMarkup from './render/render-popular-cities.js';\nimport searchCityWeather from './services/weather-api.js';\nconst popularCities = [\n  'London',\n  'Tokio',\n  'Paris',\n  'Berlin',\n  'Kyiv',\n  'Seoul',\n  'Pekin',\n  'Toronto',\n];\n\nasync function showPopularCities(popularCitiesListEl) {\n  try {\n    for (let popularCity of popularCities) {\n      const popularCityItem = await searchCityWeather(popularCity);\n\n      popularCitiesListEl.insertAdjacentHTML(\n        'beforeend',\n        createPopularCityCardMarkup(popularCityItem)\n      );\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\nexport default showPopularCities;\n","import showPopularCities from './js/popularCities.js';\nimport {\n  handleSearchCity,\n  handleDeleteTask,\n  handleClearCitiesList,\n} from './js/actions.js';\nimport {\n  formEl,\n  citiesListEl,\n  popularCitiesListEl,\n  btnClear,\n} from './js/services/refs.js';\n\nformEl.addEventListener('submit', handleSearchCity);\ncitiesListEl.addEventListener('click', handleDeleteTask);\nbtnClear.addEventListener('click', handleClearCitiesList);\n\nshowPopularCities(popularCitiesListEl);\n"],"names":["API_KEY","BASE_URL","searchCityWeather","query","axios","createCityCardMarkup","cities","list","markup","id","name","humidity","temp","weather","speed","weatherIcon","getCurrentWeather","getSavedCities","LOCAL_KEY","saveCities","formEl","citiesListEl","popularCitiesListEl","btnClear","citiesArr","handleSearchCity","e","form","cityValue","iziToast","city","addCity","err","renderCities","handleDeleteTask","btn","li","cityId","handleClearCitiesList","item","createPopularCityCardMarkup","popularCities","showPopularCities","popularCity","popularCityItem"],"mappings":"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"}